<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login and Signup</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pixelify&display=swap');

        body {
            font-family: 'Pixelify', sans-serif; /* Utilisation de la police Pixelify */
            background-color: #f0f0f0;
            text-align: center;
            padding: 50px;
        }
        .hidden {
            display: none;
        }
        #userInfo {
            margin-top: 20px;
        }
        button {
            background: linear-gradient(90deg, yellow, orange);
            border: none;
            border-radius: 5px;
            padding: 10px 20px;
            cursor: pointer;
            margin-top: 10px;
            transition: all 0.3s;
        }
        button:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <h1>Welcome to Our App</h1>
    <div id="userInfo" class="hidden">
        <img id="profilePic" src="https://upload.wikimedia.org/wikipedia/commons/0/06/YouTube_icon_%282013-2017%29.png" alt="Profile Picture" width="50">
        <span id="usernameDisplay">Username</span>
        <button onclick="logout()">Logout</button>
        <button onclick="changeUsername()">Change Username</button>
    </div>
    <div id="forms">
        <div>
            <h2>Login</h2>
            <input type="text" id="loginUsername" placeholder="Username">
            <input type="password" id="loginPassword" placeholder="Password">
            <button id="login">Login</button>
            <p id="result"></p>
        </div>
        <div class="hidden">
            <h2>Sign Up</h2>
            <input type="text" id="username" placeholder="Username">
            <input type="password" id="password" placeholder="Password">
            <button id="signup">Create Account</button>
            <p id="resultSignup"></p>
        </div>
        <p><a href="#" id="signupLink">Create an account here</a></p>
    </div>

    <script>
        let users = JSON.parse(localStorage.getItem('users')) || [];
        let loggedInUser = JSON.parse(localStorage.getItem('loggedInUser'));

        // Affiche ou cache les informations de l'utilisateur selon le statut de connexion
        if (loggedInUser) {
            document.getElementById('usernameDisplay').innerText = loggedInUser.username;
            document.getElementById('profilePic').src = loggedInUser.profilePic || 'https://upload.wikimedia.org/wikipedia/commons/0/06/YouTube_icon_%282013-2017%29.png';
            document.getElementById('userInfo').style.display = 'block';
            document.getElementById('forms').style.display = 'none'; // Cache les formulaires de connexion et d'inscription
        }

        document.getElementById('signup').addEventListener('click', function() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            if (username && password) {
                users.push({ username, password });
                localStorage.setItem('users', JSON.stringify(users));
                document.getElementById('resultSignup').innerText = 'User signed up successfully!';
                clearForm();
            } else {
                document.getElementById('resultSignup').innerText = 'Please fill in all fields!';
            }
        });

        document.getElementById('login').addEventListener('click', function() {
            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;

            const user = users.find(user => user.username === username && user.password === password);
            if (user) {
                loggedInUser = user;
                localStorage.setItem('loggedInUser', JSON.stringify(user));
                document.getElementById('usernameDisplay').innerText = user.username;
                document.getElementById('profilePic').src = user.profilePic || 'https://upload.wikimedia.org/wikipedia/commons/0/06/YouTube_icon_%282013-2017%29.png';
                document.getElementById('userInfo').style.display = 'block'; // Affiche les informations de l'utilisateur
                document.getElementById('forms').style.display = 'none'; // Cache les formulaires
                document.getElementById('result').innerText = 'User logged in successfully!';
                clearForm();
            } else {
                document.getElementById('result').innerText = 'Invalid username or password!';
            }
        });

        document.getElementById('signupLink').addEventListener('click', function() {
            const forms = document.getElementById('forms');
            const signupForm = forms.querySelectorAll('div')[1];
            const loginForm = forms.querySelectorAll('div')[0];
            loginForm.classList.add('hidden'); // Cache le formulaire de connexion
            signupForm.classList.remove('hidden'); // Affiche le formulaire d'inscription
        });

        function clearForm() {
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            document.getElementById('loginUsername').value = '';
            document.getElementById('loginPassword').value = '';
        }

        function logout() {
            loggedInUser = null;
            localStorage.removeItem('loggedInUser');
            document.getElementById('usernameDisplay').innerText = 'Username';
            document.getElementById('profilePic').src = 'https://upload.wikimedia.org/wikipedia/commons/0/06/YouTube_icon_%282013-2017%29.png'; // Réinitialise l'image par défaut
            document.getElementById('userInfo').style.display = 'none'; // Cache les informations de l'utilisateur
            document.getElementById('forms').style.display = 'block'; // Affiche les formulaires
            document.getElementById('result').innerText = 'User logged out successfully!';
        }

        function changeUsername() {
            const newUsername = prompt('Enter new username:');
            if (newUsername) {
                loggedInUser.username = newUsername; // Change le nom d'utilisateur
                localStorage.setItem('loggedInUser', JSON.stringify(loggedInUser)); // Sauvegarde le nouvel utilisateur
                document.getElementById('usernameDisplay').innerText = newUsername;
                document.getElementById('result').innerText = 'Username changed successfully!';
            }
        }
    </script>
</body>
</html>
